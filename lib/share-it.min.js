(function(){var ShareIt,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};window.ShareIt=ShareIt=function(){function ShareIt(){null==window.sharingButtons&&(window.sharingButtons={}),this.clearWidgets(),this.init()}var ajax,createButtonCounter,generateCallbackScript,options,services;return options={url:window.location.href.replace(window.location.hash,""),title:document.title,counters:!0,titles:!0,button_title:"Share to ",scheme:window.location.protocol.replace(":","")},null==window.VK&&(window.VK={}),window.VK.Share={count:function(idx,number){var script;return script=document.getElementById("vkontakte-"+idx+"-init-script"),null!=script&&script.remove(),createButtonCounter(document.getElementById("vkontakte-button-"+idx),number)}},window.ODKL={updateCount:function(idx,number){var script;return script=document.getElementById("odnoklassniki-"+idx+"-init-script"),null!=script&&script.remove(),createButtonCounter(document.getElementById("odnoklassniki-button-"+idx),number)}},services={linkedin:{url:"https://www.linkedin.com/shareArticle?url={{url}}&title={{title}}&summary={{description}}",counter_url:"https://www.linkedin.com/countserv/count/share?format=jsonp&url={{url}}",counter:0,title:"LinkedIn",attributes:["title","text","description"]},vkontakte:{url:"https://vk.com/share.php?url={{url}}&title={{title}}",counter_url:"https://vk.com/share.php?url={{url}}&act=count&index={{index}}",counter:0,title:"ВКонтакте",attributes:["title","text"],skip_gen_callback:!0},facebook:{url:"https://www.facebook.com/sharer/sharer.php?u={{url}}&title={{title}}",counter_url:"https://graph.facebook.com/?id={{url}}",type:"ajax",title:"Facebook",attributes:["title","text"],getter:function(type,element,counterUrl,url){return ajax.get(counterUrl,[],services[type].callback,!0,{element:element})},callback:function(response,opt){if(response=JSON.parse(response),null!=response.share&&null!=response.share.share_count)return createButtonCounter(opt.element,response.share.share_count)}},twitter:{url:"https://twitter.com/intent/tweet?url={{url}}&text={{title}}",counter_url:"https://opensharecount.com/count.json?url={{url}}",counter:0,type:"ajax",title:"Twitter",attributes:["title","text"],getter:function(type,element,counterUrl,url){return ajax.get(counterUrl,[],services[type].callback,!0,{element:element})},callback:function(response,opt){if(response=JSON.parse(response),"undefined"!=typeof response.count)return createButtonCounter(opt.element,response.count)}},"google-plus":{url:"https://plus.google.com/share?url={{url}}",counter_url:"https://clients6.google.com/rpc",type:"ajax",counter:0,title:"Google+",attributes:["title","text"],getter:function(type,element,counterUrl,url){var params;return window.sharingButtons[type]++,params={method:"pos.plusones.get",id:type+"-button-"+window.sharingButtons[type],jsonrpc:"2.0",key:"p",apiVersion:"v1",params:{nolog:!0,id:url,source:"widget",userId:"@viewer",groupId:"@self"}},element.setAttribute("id",type+"-button-"+window.sharingButtons[type]),ajax.post(services[type].counter_url,params,services[type].callback,!0)},callback:function(response){if(response=JSON.parse(response),null!=response.result.metadata.globalCounts.count)return createButtonCounter(document.getElementById(response.id),response.result.metadata.globalCounts.count)}},pinterest:{url:"https://pinterest.com/pin/create/button/?description={{title}}",counter_url:"https://api.pinterest.com/v1/urls/count.json?url={{url}}",counter:0,title:"Pinterest",attributes:["title","text"]},mailru:{url:"https://connect.mail.ru/share?url={{url}}&title={{title}}&description={{description}}",counter_url:options.scheme+"://connect.mail.ru/share_count?callback=1&url_list={{url}}",counter:0,title:"Mail.ru",callback_param:"func",attributes:["title","text","description"]},odnoklassniki:{url:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl={{url}}&st.title={{title}}&st.description={{description}}",counter_url:options.scheme+"://connect.ok.ru/dk?st.cmd=extLike&ref={{url}}&uid={{index}}",counter:0,title:"Odnoklassniki",attributes:["title","text"],skip_gen_callback:!0}},ajax={},ajax.x=function(){var i,j,len,versions,xhr;if("undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest)return new XMLHttpRequest;for(versions=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],xhr=null,j=0,len=versions.length;j<len;j++){i=versions[j];try{xhr=new ActiveXObject(versions[i]);break}catch(_error){}}return xhr},ajax.send=function(url,callback,method,data,sync,params){var x;return x=ajax.x(),x.open(method,url,sync),x.onreadystatechange=function(){if(4===x.readyState)return callback(x.responseText,params)},"POST"===method&&x.setRequestHeader("Content-type","application/json"),x.send(data)},ajax.get=function(url,data,callback,sync,params){var key,query;query=[];for(key in data)query.push(encodeURIComponent(key)+"="+encodeURIComponent(data[key]));return query.length&&(url+="?"+query.join("&")),ajax.send(url,callback,"GET",null,sync,params)},ajax.post=function(url,data,callback,sync,params){var query;return query=[],ajax.send(url,callback,"POST",JSON.stringify(data),sync,params)},ShareIt.prototype.clearWidgets=function(){var element,j,len,ref,results;if(null!=document.querySelectorAll(".share-it-widget")){for(ref=document.querySelectorAll(".share-it-widget"),results=[],j=0,len=ref.length;j<len;j++)element=ref[j],results.push(element.classList.remove("share-it-widget"));return results}},ShareIt.prototype.init=function(){var elements,results,typeService;results=[];for(typeService in services)elements=document.querySelectorAll(".share-it-buttons ."+typeService),elements.length&&results.push(this.initTypeButtons(elements,typeService));return results},ShareIt.prototype.initTypeButtons=function(elements,type){var i,j,ref,results;for(results=[],i=j=0,ref=elements.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)results.push(this.button(elements.item(i),type));return results},ShareIt.prototype.button=function(element,type){var btn,img,shareUrl,text,url;if(null!=element&&!element.classList.contains("share-it-widget"))return img=document.createElement("span"),img.className="share-icon",btn=document.createElement("span"),url=this.getShareUrl(type,element),text=document.createTextNode(element.dataset.text||services[type].title),btn.className="sharing-button",btn.appendChild(text),element.innerHTML="",("true"===element.parentElement.dataset.titles||options.titles&&null==element.parentElement.dataset.titles)&&(element.title=element.getAttribute("title")||options.button_title+services[type].title),element.className+=" share-it-widget",element.onclick=function(){return window.open(url)},element.appendChild(img),element.appendChild(btn),shareUrl=element.dataset.url||element.parentElement.dataset.url||options.url,"true"===element.parentElement.dataset.counters||options.counters&&null==element.parentElement.dataset.counters?(null==window.sharingButtons[type]&&(window.sharingButtons[type]=0),this.createCounter(type,element,shareUrl)):void 0},ShareIt.prototype.getShareUrl=function(type,element,title){var baseUrl,description,param,params,url;url=element.dataset.url||element.parentElement.dataset.url||options.url,title=element.dataset.title||element.parentElement.dataset.title||options.title,description=element.dataset.description||element.parentElement.dataset.description||title,/^(https?):\/\//i.test(url)||"http://".indexOf(url)!==-1||(url="http://"+url),baseUrl=services[type].url,null!=url&&(baseUrl=baseUrl.replace("{{url}}",url)),null!=title&&(baseUrl=baseUrl.replace("{{title}}",encodeURIComponent(title))),null!=description&&(baseUrl=baseUrl.replace("{{description}}",encodeURIComponent(description))),params=[];for(param in element.dataset)null!=services[type].attributes&&indexOf.call(services[type].attributes,param)>=0||params.push([param,element.dataset[param]].join("="));return params.length&&(baseUrl+="&"+params.join("&")),baseUrl},ShareIt.prototype.createCounter=function(type,element,url){var counterUrl;if(null!=services[type].counter_url&&0!==services[type].counter_url.length)return/^(https?):\/\//i.test(url)||"http://".indexOf(url)!==-1||(url="http://"+url),counterUrl=services[type].counter_url,null!=url&&(counterUrl=counterUrl.replace("{{url}}",encodeURIComponent(url))),null!=services[type].type&&"ajax"===services[type].type?services[type].getter(type,element,counterUrl,url):this.createScript(type,element,counterUrl,url)},ShareIt.prototype.createScript=function(type,element,counterUrl,url){var param,script;return window.sharingButtons[type]++,counterUrl=counterUrl.replace("{{index}}",window.sharingButtons[type]),element.setAttribute("id",type+"-button-"+window.sharingButtons[type]),null!=services[type].skip_gen_callback&&services[type].skip_gen_callback||generateCallbackScript(type,window.sharingButtons[type],url),script=document.createElement("script"),script.type="text/javascript",script.id=type+"-"+window.sharingButtons[type]+"-init-script",param=null!=services[type].callback_param?services[type].callback_param:"callback",script.setAttribute("src",counterUrl+"&"+param+"="+type+"_"+window.sharingButtons[type]+"_callback"),element.appendChild(script)},createButtonCounter=function(element,count){var counter;if(!(count<=0))return counter=document.createElement("span"),counter.className="sharing-couter",counter.appendChild(document.createTextNode(count)),element.appendChild(counter)},generateCallbackScript=function(type,number,url){var code,e,script;script=document.createElement("script"),script.type="text/javascript",script.id=type+"-"+number+"-script",code=["function "+type+"_"+number+"_callback(data) {","if (typeof data['"+url+"'] != 'undefined' && typeof data['"+url+"']['shares'] != 'undefined')","{ data.count = data['"+url+"']['shares']; }","if (typeof data.count != 'undefined' && data.count > 0) {","var counter = document.createElement('span'); counter.className = 'sharing-couter';","counter.appendChild(document.createTextNode(data.count));","document.getElementById('"+type+"-button-"+number+"').appendChild(counter); }","document.getElementById('"+type+"-"+number+"-init-script').remove();","document.getElementById('"+type+"-"+number+"-script').remove();}"].join(" ");try{return script.appendChild(document.createTextNode(code)),document.body.appendChild(script)}catch(_error){return e=_error,script.text=code,document.body.appendChild(script)}},ShareIt}(),new ShareIt}).call(this);